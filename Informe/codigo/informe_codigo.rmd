---
title: "Proyecto de Ciencia de Datos Reproducible"
output: html_document
date: "2025-09-01"
toc: TRUE
number_sections: TRUE
toc_true: TRUE

---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE, fig.width = 8, fig.height = 8)

# Librerías principales
library(readr)     # Importación de datos
library(dplyr)     # Manipulación de datos
library(ggplot2)   # Visualización
library(here)      # Manejo de rutas reproducibles
library(kableExtra)  # Tablas bonitas en RMarkdown


# Opciones globales de knitr
knitr::opts_chunk$set(
  echo = TRUE,      # Muestra código en el informe
  warning = FALSE,  # Oculta warnings
  message = FALSE   # Oculta mensajes de carga
)

```
## Introducción

La **esperanza de vida al nacer** (Life Expectancy at Birth) es uno de los indicadores más utilizados para medir el desarrollo y bienestar de una población. Representa el promedio de años que viviría un recién nacido si las tasas de mortalidad observadas en el momento de su nacimiento se mantuvieran constantes a lo largo de su vida. Su estudio nos permite comprender la evolución demográfica global en las últimas décadas. 

## Objetivos

El objetivo principal de este proyecto es analizar la evolución de la esperanza de vida en los distintos continentes entre los años 1950 y 2019, utilizando datos de Gapminder (https://www.gapminder.org/).

Como complemento, se estudiará la relación entre esperanza de vida y fertilidad para explorar cómo las dinámicas demográficas influyen en la longevidad de la población.

Los objetivos específicos son:

- Depurar y transformar los datos en un formato adecuado para el análisis.

- Describir la evolución de la esperanza de vida en los continentes.

- Analizar la relación entre esperanza de vida y tasa de fertilidad.

Se pretender responder a las siguientes cuestiones: 

- ¿Cómo ha evolucionado la esperanza de vida en los diferentes continentes entre 
1950 y 2019? 

- ¿Existe relación entre esperanza de vida y fertilidad? 
 
- ¿Cuál es la magnitud de la brecha en la esperanza de vida entre Europa y África a lo 
largo de las décadas? 

- ¿Cómo se distribuye la esperanza de vida a nivel mundial en momentos clave (por 
ejemplo 1950, 1980 y 2019)?


## Datos 

```{r, message=FALSE, warning=FALSE}

install.packages("here")
install.packages("kableExtra")

datos <- read_csv(here("Datos/base_depurada/LifeExpact_Fertility_dep.csv"))

head(datos)

```

# Tabla resumen

```{r}

datos <- read_csv("../../Datos/base_depurada/LifeExpact_Fertility_dep.csv")

tabla_resumen <- datos %>%
  filter(year >= 1950) %>%
  group_by(continent) %>%
  summarise(
    EsperanzaVidaMedia = round(mean(life_expectancy, na.rm = TRUE), 1),
    FertilidadMedia = round(mean(fertility_rate, na.rm = TRUE), 1)
  )

tabla_resumen %>%
  kbl(caption = "Promedios de esperanza de vida y fertilidad por continente (1950–2019)") %>%
  kable_styling(full_width = FALSE, position = "center")


```

# Evolucion de la esperanza de vida 

```{r}

ggplot(datos %>% filter(year >= 1950),
       aes(x = year, y = life_expectancy, color = continent)) +
  geom_line(stat = "summary", fun = "mean", size = 1) +
  labs(
    title = "Evolución de la esperanza de vida media por continente (1950–2019)",
    x = "Año",
    y = "Esperanza de vida (años)"
  ) +
  theme_minimal()


``` 

# Relación entre esperanza de vida y fertilidad 

```{r}

ggplot(datos %>% filter(year >= 1950),
       aes(x = year, y = life_expectancy, color = continent)) +
  geom_line(stat = "summary", fun = "mean", size = 1) +
  labs(
    title = "Evolución de la esperanza de vida media por continente (1950–2019)",
    x = "Año",
    y = "Esperanza de vida (años)"
  ) +
  theme_minimal()



